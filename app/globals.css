@import "tailwindcss";

:root {
  --background: #ffffff;
  --foreground: #171717;
}

@theme inline {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --font-sans: var(--font-inter);
  --font-mono: ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas, "Liberation Mono", monospace;
}

@media (prefers-color-scheme: dark) {
  :root {
    --background: #0a0a0a;
    --foreground: #ededed;
  }
}

/* Dynamic viewport height variable - set via JavaScript */
:root {
  --vh: 1vh; /* Fallback, will be updated by JS */
}

html {
  /* Prevent pull-to-refresh */
  overscroll-behavior-y: none;
  overscroll-behavior-x: none;
  /* Use small viewport height (svh) - excludes browser UI, stays constant */
  /* This prevents address bar hide/show from affecting layout */
  height: auto;
  min-height: 100svh; /* Small viewport height - excludes browser UI, constant */
  /* Fallback for browsers that don't support svh */
  min-height: calc(var(--vh, 1vh) * 100);
  /* Prevent horizontal overflow */
  overflow-x: hidden;
  /* Smooth scrolling */
  scroll-behavior: smooth;
  /* Lock viewport to prevent address bar from affecting layout */
  position: relative;
}

body {
  background: var(--background);
  color: var(--foreground);
  font-family: var(--font-inter), -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
  /* Use small viewport height (svh) - excludes browser UI, stays constant */
  /* This prevents address bar hide/show from affecting layout on scrollable pages */
  min-height: 100svh; /* Small viewport height - excludes browser UI, constant */
  /* Fallback using CSS variable for maximum compatibility */
  min-height: calc(var(--vh, 1vh) * 100);
  /* Prevent unwanted scrolling */
  touch-action: pan-y;
  /* Prevent elastic scrolling on iOS */
  -webkit-overflow-scrolling: touch;
  /* Prevent horizontal overflow */
  overflow-x: hidden;
  /* Allow vertical scrolling */
  overflow-y: auto;
  /* Prevent pull-to-refresh */
  overscroll-behavior-y: none;
  overscroll-behavior-x: none;
  /* Position relative for proper stacking */
  position: relative;
  /* Lock body height to prevent address bar from affecting layout */
  height: auto;
}

/* Prevent address bar from showing/hiding on scroll */
* {
  /* Prevent overscroll bounce on iOS */
  -webkit-overflow-scrolling: touch;
  /* Prevent tap highlight on mobile */
  -webkit-tap-highlight-color: transparent;
}

/* Contain scroll within scrollable areas */
.scroll-container,
[data-scroll-container],
main,
[role="main"] {
  overscroll-behavior: contain;
  overscroll-behavior-y: contain;
}

/* Mobile-specific optimizations */
@media (max-width: 768px) {
  html {
    /* Use small viewport height (svh) on mobile - excludes browser UI */
    /* This prevents address bar from affecting layout when scrolling */
    min-height: 100svh; /* Small viewport - constant, excludes browser UI */
    min-height: -webkit-fill-available; /* iOS Safari fallback */
    min-height: calc(var(--vh, 1vh) * 100); /* Fallback using CSS variable */
    /* Lock height to prevent address bar show/hide from affecting layout */
    height: auto;
  }
  
  body {
    /* Use small viewport height (svh) on mobile - excludes browser UI */
    /* This prevents address bar from affecting layout when scrolling */
    min-height: 100svh; /* Small viewport - constant, excludes browser UI */
    min-height: -webkit-fill-available; /* iOS Safari fallback */
    min-height: calc(var(--vh, 1vh) * 100); /* Fallback using CSS variable */
    /* Lock body to prevent address bar show/hide from affecting layout */
    height: auto;
    /* Ensure body can scroll but doesn't jump when address bar hides */
    position: relative;
  }
  
  /* Prevent address bar from affecting scrollable content */
  body > * {
    /* Ensure children use consistent viewport */
    min-height: 0;
  }
}

@keyframes shimmer {
  0% {
    transform: translateX(-100%);
  }
  100% {
    transform: translateX(100%);
  }
}

@keyframes fade-in {
  0% {
    opacity: 0;
    transform: translateY(10px);
  }
  100% {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes slide-up {
  0% {
    transform: translateY(100%);
    opacity: 0;
  }
  100% {
    transform: translateY(0);
    opacity: 1;
  }
}

.animate-shimmer {
  animation: shimmer 3s infinite;
}

.animate-fade-in {
  animation: fade-in 0.5s ease-out forwards;
}

.animate-slide-up {
  animation: slide-up 0.5s ease-out forwards;
}

@keyframes scale-in {
  0% {
    transform: scale(0);
    opacity: 0;
  }
  50% {
    transform: scale(1.2);
  }
  100% {
    transform: scale(1);
    opacity: 1;
  }
}

.animate-scale-in {
  animation: scale-in 0.3s ease-out forwards;
}

/* Safe viewport height utility classes */
.min-h-safe-screen {
  min-height: 100svh; /* Small viewport height - excludes browser UI, constant */
  min-height: calc(var(--vh, 1vh) * 100); /* Fallback using CSS variable */
  /* Don't use dvh here as it changes when address bar hides/shows */
}

.h-safe-screen {
  min-height: 100svh;
  min-height: 100dvh;
  min-height: calc(var(--vh, 1vh) * 100);
  height: auto; /* Allow content to grow */
}

/* Smooth scrolling for dropdowns on mobile */
[data-dropdown-scroll] {
  -webkit-overflow-scrolling: touch;
  overscroll-behavior-y: contain;
  scroll-behavior: smooth;
  will-change: scroll-position;
  transform: translateZ(0);
  -webkit-transform: translateZ(0);
  backface-visibility: hidden;
}
